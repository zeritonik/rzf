# rzf
**Как оно работает:**
1. `State` представляет собой хранилище для какого-то значения и `Observable` паттерн для установки, вызова и очистки колбеков на изменения этого значения.
	1. `addCallback` добавляет колбек на изменение значения 
	2. `removeCallbacks` убирает колбеки
	3. `setState` изменяет значение и вызывает колбеки в порядке обратном добавлению
	4. `getState` возвращает текущее хранимое значение 
2. `Component` - базовый класс для компонентов. 
	1. В наследуемых классах нужно реализовать методы: `init` - метод для пользовательской инициализации компонента до вызова `build`, этот метод будет вызван с аргументами, переданными в конструктор при создании компонента; `build` - метод для построения компонента; `render` метод для изменения отображаемых данных(в теории `render` НЕ ДОЛЖЕН менять поддерево), на вход `render` получает ссылку на изменённый `State`, его прошлое и новое значение 
	2. К каждому компоненту привязывается html элемент, который является корнем дерева компонента, выбрать какой именно это будет элемент можно через переопределение статического поля `BASE_ELEMENT`. Этот элемент можно получить через гетер `element`, так же в нём создаётся свойство `rzf_component`, являющееся ссылкой на сам компонент
	3. Компоненты имеют специальные методы `createState`, `createCallback` для создания состояний и колбеков. `createState` создаёт `State` с указанным значением и добавляет в колбеки вызов метода `render` у компонента. `createCallback` добавляет к указанному стейту указанный колбек и запоминает его в мапе `this.states` что бы при удалении компонента очистить все созданные им колбеки. 
3. `RootComponent` - это потомок компонента, являющийся базовым классом для "главного" компонента приложения, его `element` - это div с айди root, так же он следит за изменениями в доме и вызывает очистку колбеков для удаляемых компонентов.

**Пример**
С небольшим примером использования можно ознакомится в папке example(*пример пока-что без type script*)
